[general]

#æµ‹è¯•èŠ‚ç‚¹å»¶è¿ŸURL
server_check_url= http://www.qualcomm.cn/generate_204
#èŠ‚ç‚¹å»¶è¿Ÿæµ‹è¯•è¶…æ—¶å‚æ•°ï¼Œéœ€å°äº 5000 æ¯«ç§’æ‰ç”Ÿæ•ˆ
server_check_timeout=3000

#èµ„æºè§£æå™¨ï¼Œå…·ä½“å†…å®¹ç›´æ¥å‚ç…§é“¾æ¥é‡Œçš„ä½¿ç”¨è¯´æ˜
resource_parser_url= https://fastly.jsdelivr.net/gh/KOP-XIAO/QuantumultX@master/Scripts/resource-parser.js

#geo_location_checkerç”¨äºèŠ‚ç‚¹é¡µé¢çš„èŠ‚ç‚¹ä¿¡æ¯å±•ç¤º
geo_location_checker=http://ip-api.com/json/?lang=zh-CN, https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/IP_API.js

# åœ¨ç½‘ç»œç¯å¢ƒåˆ‡æ¢æ—¶å‡ºå‘è¿è¡Œæ¨¡å¼å˜æ›´
# filter - è§„åˆ™åˆ†æµï¼Œall_proxy - å…¨éƒ¨ä»£ç†ï¼Œall_direct - å…¨éƒ¨ç›´è¿
# ç¤ºä¾‹æ„æ€ï¼š[èœ‚çªæ•°æ®],[Wi-Fi],[SSID]
# ä¸‹åˆ—ç¤ºä¾‹çš„æ„æ€ä¸ºï¼šåœ¨èœ‚çªæ•°æ®ä½¿ç”¨è§„åˆ™åˆ†æµ(ç¬¬ä¸€ä¸ª filter)ï¼Œåœ¨ Wi-Fi ä½¿ç”¨è§„åˆ™åˆ†æµ(ç¬¬äºŒä¸ª filter)ï¼Œåœ¨ SSID ä¸º LINK_22E171 çš„ Wi-Fi ä½¿ç”¨å…¨éƒ¨ä»£ç†ï¼Œï¼Œåœ¨ SSID ä¸º LINK_22E172 çš„ Wi-Fi ä½¿ç”¨å…¨éƒ¨ç›´è¿
# Rewrite åŠ Task æ¨¡å—å§‹ç»ˆç”Ÿæ•ˆ
#running_mode_trigger=filter, filter, LINK_22E171:all_proxy, LINK_22E172:all_direct

# åœ¨ç‰¹å®š SSID ç½‘ç»œæ—¶(é™¤äº† Task æ¨¡å—)æš‚åœ Quantumult X
#ssid_suspended_list=LINK_22E174, LINK_22E175



;dns exclusion listä¸­çš„åŸŸåå°†ä¸ä½¿ç”¨fake-ipæ–¹å¼. å…¶å®ƒåŸŸååˆ™å…¨éƒ¨é‡‡ç”¨ fake-ip åŠè¿œç¨‹è§£æçš„æ¨¡å¼
;dns_exclusion_list=*.qq.com

;UDP ç™½åå•ï¼Œç•™ç©ºåˆ™é»˜è®¤æ‰€æœ‰ä¸ºç«¯å£ã€‚ä¸åœ¨udpç™½åå•åˆ—è¡¨ä¸­çš„ç«¯å£ï¼Œå°†è¢«ä¸¢å¼ƒå¤„ç†ï¼ˆè¿”å› ICMP  â€œç«¯å£ä¸å¯è¾¾â€ ä¿¡æ¯ï¼‰ã€‚
;udp_whitelist=53, 80-427, 444-65535

; UDP Dropåå•ï¼ŒåŒç™½åå•ç±»ä¼¼ï¼Œä½†ä¸ä¼šè¿”å› ICMP â€œç«¯å£ä¸å¯è¾¾â€ ä¿¡æ¯
; drop åå•ä»…å¤„ç† whiteliståå•ä¸­çš„ç«¯å£
;udp_drop_list = 1900, 80

# å‚æ•° fallback_udp_policy ä»…æ”¯æŒ v1.0.19 ä»¥åŠä¹‹åçš„ç‰ˆæœ¬ã€‚
# å‚æ•° fallback_udp_policy çš„å€¼ä»…æ”¯æŒæœ«ç«¯ç­–ç•¥ï¼ˆæœ«ç«¯ç­–ç•¥ä¸ºç»ç”±è§„åˆ™æ¨¡å—å’Œç­–ç•¥æ¨¡å—åæ‰€å‘½ä¸­çš„ç­–ç•¥ï¼Œä¾‹å¦‚ï¼šdirectã€reject ä»¥åŠèŠ‚ç‚¹ï¼›ä¸æ”¯æŒå†…ç½®ç­–ç•¥ proxy ä»¥åŠå…¶å®ƒè‡ªå®šä¹‰ç­–ç•¥ï¼‰ã€‚
fallback_udp_policy=direct

;ä¸‹åˆ—è¡¨ä¸­çš„å†…å®¹å°†ä¸ç»è¿‡ QuantumultXçš„å¤„ç†ï¼Œè®¾ç½®åå»ºè®®é‡å¯è®¾å¤‡
;excluded_routes= 192.168.0.0/16, 172.16.0.0/12, 100.64.0.0/10, 10.0.0.0/8
;icmp_auto_reply=true

;æŒ‡å®š DoH  è¯·æ±‚æ‰€ä½¿ç”¨çš„ User-Agent
;doh_user_agent=Agent/1.0

;æŒ‡å®šæœåŠ¡å™¨æµ‹è¯•æ—¶æ‰€ä½¿ç”¨çš„ User-Agent
;server_check_user_agent = Agent/1.0

// é»˜è®¤å½“ DNS å±‚é¢æŸdomain è¢«rejectæ—¶ï¼Œå°†è¿”å›loopback IPã€‚ä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‚æ•°
// ä¿®æ”¹æˆä¸º â€œno-error-no-answerâ€ï¼Œæˆ–è€… â€œnxdomainâ€
;dns_reject_domain_behavior = loopback



[dns]
no-system
no-ipv6
#å¦‚æœdnsè¿”å›ä»¥ä¸‹ipï¼Œåˆ™ç­‰å¾…è¿”å›æ­£ç¡®ip
circumvent-ipv4-answer = 127.0.0.1, 0.0.0.0
circumvent-ipv6-answer = ::

#å¦‚éœ€ä½¿ç”¨ DoH3ï¼ŒDNS over HTTP/3ï¼Œè¯·å¼€å¯ä¸‹é¢å‚æ•°
#prefer-doh3

server=119.29.29.29
server=223.5.5.5
#æ±¡æŸ“ä¸ä¸¥é‡æˆ–è€…ä¸æ˜¯é‚£ä¹ˆåœ¨æ„éšç§å¯ä»¥ä¸å¯ç”¨doh
#doh-server= https://223.5.5.5/dns-query

[task_local]

event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/streaming-ui-check.js, tag = æµåª’ä½“ - è§£é”æŸ¥è¯¢ï¼Œimg-url=checkmark.seal.system, enabled=true

#ä»¥ä¸‹ä¸ºç­–ç•¥ç»„[policy]éƒ¨åˆ†
# static ç­–ç•¥ç»„ä¸­ï¼Œä½ éœ€è¦æ‰‹åŠ¨é€‰æ‹©æƒ³è¦çš„èŠ‚ç‚¹/ç­–ç•¥ç»„ã€‚
# available ç­–ç•¥ç»„å°†æŒ‰é¡ºåºé€‰æ‹©ä½ åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªå¯ç”¨çš„èŠ‚ç‚¹ã€‚
# round-robin ç­–ç•¥ç»„ï¼Œå°†æŒ‰åˆ—è¡¨çš„é¡ºåºè½®æµä½¿ç”¨å…¶ä¸­çš„èŠ‚ç‚¹ã€‚
# url-latency-benchmark å»¶è¿Ÿç­–ç•¥ç»„ï¼Œé€‰å–å»¶è¿Ÿæœ€ä¼˜èŠ‚ç‚¹ã€‚
# dest-hash ç­–ç•¥ç»„ï¼Œéšæœºè´Ÿè½½å‡è¡¡ï¼Œä½†ç›¸åŒåŸŸåèµ°å›ºå®šèŠ‚ç‚¹ã€‚
# ssid ç­–ç•¥ç»„ï¼Œå°†æ ¹æ®ä½ æ‰€è®¾å®šçš„ç½‘ç»œæ¥è‡ªåŠ¨åˆ‡æ¢èŠ‚ç‚¹/ç­–ç•¥ç»„

[policy]
static=Global acceleration, proxy, Hong kong, Taiwan, Japan, Singapore, South Korea, America, img-url=https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Universal/Final.png
static=Apple, direct, proxy, img-url=https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Social_Media/Apple.png
static=Netfix, proxy, Taiwan, Japan, Singapore, South Korea, Hong kong, America, img-url=https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Universal/Netflix.png
static=Disney, proxy, Taiwan, Japan, Singapore, South Korea, Hong kong, America, img-url=https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Social_Media/Daily_Motion.png
static=Spotify, proxy, direct, Taiwan, Japan, Singapore, South Korea, Hong kong, America, img-url=https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Social_Media/Spotify.png
static=bilibili, direct, Hong kong, Taiwan, img-url=https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Universal/BiliBili.png
static=YouTube, proxy, Taiwan, Japan, Singapore, South Korea, Hong kong, America, img-url=https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Social_Media/YouTube.png
static=Google, proxy, Taiwan, Japan, Singapore, South Korea, Hong kong, America, img-url=https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Google_Suite/Google.png
static=stream media, proxy, Hong kong, Taiwan, America, Japan, Singapore, South Korea, img-url=https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Social_Media/FilmAffinity.png
static=final, proxy, Taiwan, Japan, Singapore, South Korea, Hong kong, America, Global acceleration, direct, img-url=https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Universal/Clubhouse.png
url-latency-benchmark=Taiwan, server-tag-regex=(å°æ¹¾|TW|Tai), check-interval=600, tolerance=0, alive-checking=false, img-url=https://raw.githubusercontent.com/Orz-3/face/master/TW.png
url-latency-benchmark=Japan, server-tag-regex=(æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|JP|Japan|ğŸ‡¯ğŸ‡µ), check-interval=600, tolerance=0, alive-checking=false, img-url=https://raw.githubusercontent.com/Orz-3/face/master/JP.png
url-latency-benchmark=Singapore, server-tag-regex=(æ–°åŠ å¡|å¡|ç‹®åŸ|SG|Singapore|ğŸ‡¸ğŸ‡¬), check-interval=600, tolerance=0, alive-checking=false, img-url=https://raw.githubusercontent.com/Orz-3/face/master/SG.png
url-latency-benchmark=South Korea, server-tag-regex=(KR|Korea|KOR|é¦–å°”|éŸ©å›½|ğŸ‡°ğŸ‡·), check-interval=600, tolerance=0, alive-checking=false, img-url=https://raw.githubusercontent.com/Orz-3/face/master/KR.png
url-latency-benchmark=Hong kong, server-tag-regex=(é¦™æ¸¯|HK|Hong|ğŸ‡­ğŸ‡°), check-interval=600, tolerance=0, alive-checking=false, img-url=https://raw.githubusercontent.com/Orz-3/face/master/HK.png
url-latency-benchmark=America, server-tag-regex=(ç¾å›½|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|United States|ğŸ‡ºğŸ‡¸), check-interval=600, tolerance=0, alive-checking=false, img-url=https://raw.githubusercontent.com/Orz-3/face/master/US.png


# "tag" è·Ÿ "enabled" ä¸ºå¯é€‰å‚æ•°ï¼Œåˆ†åˆ«è¡¨ç¤º â€œæ ‡ç­¾â€åŠâ€œå¼€å¯çŠ¶æ€â€, true ä¸ºå¼€å¯ï¼Œfalse å…³é—­.
# update-interval ä¸ºæ›´æ–°æ—¶é—´å‚æ•°ï¼Œå•ä½ ç§’

#æœåŠ¡å™¨è¿œç¨‹è®¢é˜…
[server_remote]


#è§„åˆ™åˆ†æµè¿œç¨‹è®¢é˜…
[filter_remote]
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Unbreak.list, tag=Rule Amendment, force-policy=direct, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/app2smile/rules/master/rule/zhihu-ad-qx.list, tag=çŸ¥ä¹å»å¹¿å‘Š, force-policy=reject, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/app2smile/rules/master/rule/tieba-ad-qx.list, tag=è´´å§å»å¹¿å‘Š, force-policy=reject, update-interval=172800, opt-parser=false, enabled=true
https://limbopro.com/Adblock4limbo.list, tag=æ¯’å¥¶å»å¹¿å‘Š, force-policy=reject, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Disney/Disney.list, tag=Disney, force-policy=Disney, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Amazon/Amazon.list, tag=Amazon, force-policy=America, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Facebook/Facebook.list, tag=Facebook, force-policy=America, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Netflix/Netflix.list, tag=Netflix, force-policy=Netfix, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Apple/Apple.list, tag=Apple, force-policy=Apple, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Spotify/Spotify.list, tag=Spotify, force-policy=America, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/StreamingSE.list, tag=bilibili, force-policy=bilibili, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/YouTube/YouTube.list, tag=YouTube, force-policy=YouTube, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Google/Google.list, tag=Google, force-policy=Google, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Streaming.list, tag=stream media, force-policy=Global acceleraton, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Global.list, tag=Global acceleration, force-policy=Global acceleration, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/WeChat/WeChat.list, tag=WeChat, force-policy=direct, update-interval=172800, opt-parser=true, enabled=true
#rewrite å¤å†™è¿œç¨‹è®¢é˜…
[rewrite_remote]
https://raw.githubusercontent.com/app2smile/rules/master/module/tieba-qx.conf, tag=è´´å§å»å¹¿å‘Š, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/app2smile/rules/master/module/spotify.conf, tag=Spotifyç ´è§£, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/app2smile/rules/master/module/qidian.conf, tag=èµ·ç‚¹å»å¹¿å‘Š, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/app2smile/rules/master/module/zhihu.conf, tag=çŸ¥ä¹å»å¹¿å‘Š, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/app2smile/rules/master/module/adsense.conf, tag=å¹¿å‘Šè”ç›Ÿ, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/I-am-R-E/Functional-Store-Hub/Master/KuWoMusic/KuWoMusic.Surge.sgmodule, tag=reé…·æˆ‘ç ´è§£, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/zqzess/rule_for_quantumultX/master/Surge/Module/bodianMusic.sgmodule, tag=æ³¢ç‚¹éŸ³ä¹å±è”½mv, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/bai1zi/shadowrocket-surge-loon-qx/main/WeChat.sgmodule, tag=WeChatå…¬ä¼—å·å»å¹¿å‘Š, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/bai1zi/shadowrocket-surge-loon-qx/main/YouTubeads.sgmodule, tag=YouTubeå»å¹¿å‘Š, update-interval=172800, opt-parser=true, enabled=true
https://limbopro.com/Adblock4limbo.conf, tag=æ¯’å¥¶å»å¹¿å‘Š, update-interval=172800, opt-parser=false, enabled=true

# æœ¬åœ°æœåŠ¡å™¨éƒ¨åˆ†
[server_local]



#æœ¬åœ°åˆ†æµè§„åˆ™(å¯¹äºå®Œå…¨ç›¸åŒçš„æŸæ¡è§„åˆ™ï¼Œæœ¬åœ°çš„å°†ä¼˜å…ˆç”Ÿæ•ˆ)
[filter_local]
user-agent, ?abc*, proxy
host, www.google.com, proxy
host-keyword, adsite, reject
host-suffix, googleapis.com, proxy
//å¼ºåˆ¶åˆ†æµèµ°èœ‚çªç½‘ç»œ
;host-suffix, googleapis.com, proxy, force-cellular
//è®©åˆ†æµèµ°èœ‚çªç½‘ç»œè·Ÿ Wi-Fi ä¸­çš„ä¼˜é€‰ç»“æœ
;host-suffix, googleapis.com, proxy, multi-interface
//è®©åˆ†æµèµ°èœ‚çªç½‘ç»œè·Ÿ Wi-Fi ä¸­çš„è´Ÿè½½å‡è¡¡ï¼Œæä¾›æ›´å¤§å¸¦å®½å‡ºå…¥æ¥å£
;host-suffix, googleapis.com, proxy, multi-interface-balance
//æŒ‡å®šåˆ†æµèµ°ç‰¹å®šç½‘ç»œæ¥å£
;host-suffix, googleapis.com, proxy, via-interface=pdp_ip0

// %TUN% å‚æ•°ï¼Œå›ä¼ ç»™ Quantumult X æ¥å£ï¼Œå¯ç”¨äºæ›²çº¿å®ç°ä»£ç†é“¾åŠŸèƒ½
;host-suffix, example.com, ServerA, via-interface=%TUN%
;ip-cidr, ServerA's IP Range, ServerB

// ip è§„åˆ™
ip-cidr, 10.0.0.0/8, direct
ip-cidr, 127.0.0.0/8, direct
ip-cidr, 172.16.0.0/12, direct
ip-cidr, 192.168.0.0/16, direct
ip-cidr, 224.0.0.0/24, direct
geoip,cn,direct
final,final


#æœ¬åœ°å¤å†™è§„åˆ™
[rewrite_local]

#ä»¥ä¸‹ä¸ºè¯ä¹¦&ä¸»æœºåéƒ¨åˆ†
[mitm]
